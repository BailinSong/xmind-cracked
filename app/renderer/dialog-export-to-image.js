module.exports=webpackJsonp([15],{10:function(t,e){t.exports=require("fs")},1009:function(t,e,a){"use strict";var s=a(0),o=s(a(29)),n=s(a(1010));(0,o.default)(n.default,{name:"dialog-export-to-image"})},1010:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(366),o=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);var r=a(1013),i=a(1);var l=function(t){a(1011)},u=Object(i.a)(o.a,r.a,r.b,!1,l,"data-v-1c321525",null);e.default=u.exports},1011:function(t,e,a){var s=a(1012);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(20).default)("ebf4479c",s,!0,{})},1012:function(t,e,a){(t.exports=a(18)()).push([t.i,"\n.uk-form-aligned > div > .uk-form-label[data-v-1c321525] {\n  width: 146px;\n}\n",""])},1013:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uk-window uk-window-dialog uk-window-dialog-default",attrs:{id:"app"}},[a("div",{staticClass:"uk-window-title-bar uk-window-title-bar-floating"},[a("window-control-button-group")],1),t._v(" "),a("div",{staticClass:"uk-window-body uk-flex uk-flex-column"},[a("div",{staticClass:"uk-panel uk-padding-large uk-flex uk-flex-column uk-height-expand"},[a("h1",[t._v("\n        "+t._s(t.heading[t.exportType])+"\n      ")]),t._v(" "),a("div",{staticClass:"uk-panel uk-form-aligned"},[a("div",{staticClass:"uk-margin-top uk-margin-small"},[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Content:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-small",staticStyle:{width:"176px"},attrs:{name:"content"}},[t._v("\n              "+t._s(t.exportContentScopeTypes[t.exportContentScope])+"\n            ")]),t._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},t._l(t.exportContentScopeTypes,function(e,s){return a("li",{key:s},[a("button",{class:{"uk-checked":t.exportContentScope===s},on:{click:function(e){t.exportContentScope=s}}},[t._v("\n                    "+t._s(e)+"\n                  ")])])}),0)])])]),t._v(" "),a("div",[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Scale:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-small",staticStyle:{width:"176px"},attrs:{name:"scale",disabled:"svg"===t.exportType}},[t._v("\n              "+t._s(t.exportAvailableScales[t.exportScale-1])+"\n            ")]),t._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},t._l(t.exportAvailableScales,function(e,s){return a("li",{key:s},[a("button",{class:{"uk-checked":t.exportScale===s+1},on:{click:function(e){t.exportScale=s+1}}},[t._v("\n                    "+t._s(e)+"\n                  ")])])}),0)]),t._v(" "),t.bigMindMap&&"png"===t.exportType?a("div",{staticClass:"uk-flex uk-margin-small"},[a("div",{staticClass:"uk-preserve uk-margin-xsmall-right",attrs:{"data-src":t.iconWarning,"uk-svg":""}}),t._v(" "),a("div",{staticClass:"uk-text-muted",staticStyle:{width:"280px"}},[t._v("\n                "+t._s(t.$T("The image size will be reduced because the currently set size is over the maximum."))+"\n              ")])]):t._e()])]),t._v(" "),a("div",{staticClass:"uk-margin-small"},[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Options:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls uk-margin-xsmall-top"},[a("div",{staticClass:"uk-margin-small"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exportTransparent,expression:"exportTransparent"}],staticClass:"uk-checkbox uk-margin-xsmall-right",attrs:{type:"checkbox",name:"transparent"},domProps:{checked:Array.isArray(t.exportTransparent)?t._i(t.exportTransparent,null)>-1:t.exportTransparent},on:{change:function(e){var a=t.exportTransparent,s=e.target,o=!!s.checked;if(Array.isArray(a)){var n=t._i(a,null);s.checked?n<0&&(t.exportTransparent=a.concat([null])):n>-1&&(t.exportTransparent=a.slice(0,n).concat(a.slice(n+1)))}else t.exportTransparent=o}}}),t._v("\n                "+t._s(t.$T("Transparent Background"))+"\n              ")])])])]),t._v(" "),"svg"===t.exportType?a("hr",{staticClass:"uk-margin-xsmall-bottom uk-separator"}):t._e(),t._v(" "),"svg"===t.exportType?a("div",{staticClass:"uk-flex-column uk-text-muted"},[t._v("\n          "+t._s(t.$T("For complete image display, please make sure the font has been installed."))+"\n        ")]):t._e()])])]),t._v(" "),a("div",{staticClass:"uk-window-button-bar"},[a("div",{staticClass:"uk-button-group"},[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit",autofocus:""},on:{click:t.doExport}},[t._v("\n        "+t._s(t.$T("Export"))+"\n      ")]),t._v(" "),a("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:t.cancel}},[t._v("\n        "+t._s(t.$T("Cancel"))+"\n      ")])])])])},o=[]},15:function(t,e){t.exports=require("querystring")},16:function(t,e){t.exports=require("util")},23:function(t,e){t.exports=require("events")},25:function(t,e){t.exports=require("os")},26:function(t,e){t.exports=require("crypto")},31:function(t,e){t.exports=require("tty")},32:function(t,e){t.exports=require("net")},366:function(t,e,a){"use strict";var s=a(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(a(15)),n=a(8),r=s(a(41)),i=a(13),l=s(a(14)),u=a(34),c=a(21);const p=o.default.parse(window.location.search.slice(1));var d={mixins:[r.default],data(){return{exportType:p.type||"png",exportContentScope:0,exportScale:1,exportTransparent:!1,iconWarning:this.$toResourceURL("static/images/dialog-export-to-image/warning.svg"),iconLock:this.$toResourceURL("static/images/dialog-export-to-image/lock.svg"),exportAvailableScales:["100%","200%","300%"]}},computed:{exportContentScopeTypes(){return[this.$T("Current Map"),this.$T("Whole Workbook")]},heading(){return{png:this.$T("Export to PNG"),svg:this.$T("Export to SVG")}},validSubState:{get(){return this.$store.getters["activation/status"]===n.ACTIVATION_STATUS.VALID},set(){throw new Error("Not allow set subState.")}},bigMindMap(){return Math.max(p.bound[0],p.bound[1])*this.exportScale>3e4},touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Export"),backgroundColor:"primary",click:"doExport"},{type:"space",size:"flexible"}].filter(Boolean)}},watch:{async exportScale(t){t>1&&!await this.handlerForLimitedFeature()&&(this.exportScale=1)}},methods:{doExport(){const t={contentScope:this.exportContentScope,transparent:this.exportTransparent,type:this.exportType};"png"===this.exportType&&Object.assign(t,{scale:this.exportScale}),this.$safeRun(()=>{l.default.fetch((0,i.WINDOW_SUBMIT_RESULT)(window.id),t).then(()=>window.close())})},cancel(){window.close()},async handlerForLimitedFeature(){if(this.$store.commit("activation/checkpoint"),this.$store.getters["activation/status"]===n.ACTIVATION_STATUS.VALID)return!0;{let t,e;if("true"===process.env.VANA_LICENSE_MODE)e="activate",t=this.$T("Activate Now");else{const a=""===this.$store.state.account.user&&""===this.$store.state.account.token;e=a?"signIn":"activate",t=a?this.$T("Sign in and Subscribe"):this.$T("Subscribe")}let a=await(0,u.showMessageBox)({type:"info",title:this.$T("This Feature is Locked"),message:this.$T("This Feature is Locked"),detail:"true"===process.env.VANA_LICENSE_MODE?this.$T("This feature is not available in Trial Mode. Please activate XMind to unlock it."):this.$T("This feature is not available in Trial Mode. Please subscribe XMind to unlock it."),buttons:[t,this.$T("Cancel")],cancelId:1,defaultId:0});return Array.isArray(a)&&a.length>0&&0===a[0]&&(this.$store.handleCommand(e),(0,c.trackConfig)({name:"sourceOfPurchase",value:"exportScale"})),!1}}}};e.default=d},4:function(t,e){t.exports=require("path")},6:function(t,e){t.exports=require("electron")}},[1009]);