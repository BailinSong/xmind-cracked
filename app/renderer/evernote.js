module.exports=webpackJsonp([12],{10:function(e,t){e.exports=require("fs")},15:function(e,t){e.exports=require("querystring")},16:function(e,t){e.exports=require("util")},2106:function(e,t,n){"use strict";var r=n(0),o=r(n(29)),i=r(n(2107));(0,o.default)(i.default,{name:"evernote"})},2107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(894),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);var a=n(2108),s=n(1),u=Object(s.a)(o.a,a.a,a.b,!1,null,null,null);t.default=u.exports},2108:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uk-window uk-window-dialog",attrs:{id:"app"}},[n("div",{staticClass:"uk-window-title-bar"},[n("div",{staticClass:"uk-window-title"},[e._v("Evernote")]),e._v(" "),n("window-control-button-group")],1),e._v(" "),n("div",{staticClass:"uk-window-body uk-flex uk-flex-column"},[n("ul",{staticClass:"uk-tab uk-tab-contained uk-flex uk-flex-center",attrs:{"uk-tab":""}},[n("li",{staticClass:"uk-active",attrs:{"aria-expanded":"true"},on:{click:function(t){return e.switchToChina(!1)}}},[n("a",[e._v("Evernote")])]),e._v(" "),n("li",{attrs:{"aria-expanded":"false"},on:{click:function(t){return e.switchToChina(!0)}}},[n("a",[e._v("印象笔记")])])]),e._v(" "),n("div",{staticClass:"uk-flex-1 uk-flex uk-position-relative"},[n("webview",{key:e.oathURL,staticClass:"uk-flex-1",attrs:{src:e.oathURL,partition:"evernote"},on:{"did-finish-load":function(t){return e.handleAuthorization(t)},"did-start-loading":function(t){e.showSpinner=!0},"did-stop-loading":function(t){e.showSpinner=!1}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSpinner,expression:"showSpinner"}],staticClass:"uk-background-default uk-position-cover uk-flex uk-flex-1 uk-flex-center uk-flex-middle",staticStyle:{color:"#00c253"}},[n("div",{attrs:{"uk-spinner":"ratio: 4;"}})])],1)])])},o=[]},23:function(e,t){e.exports=require("events")},25:function(e,t){e.exports=require("os")},26:function(e,t){e.exports=require("crypto")},31:function(e,t){e.exports=require("tty")},32:function(e,t){e.exports=require("net")},332:function(e,t){e.exports=require("evernote")},4:function(e,t){e.exports=require("path")},49:function(e,t){e.exports=require("url")},6:function(e,t){e.exports=require("electron")},894:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(12)),i=r(n(49)),a=r(n(332)),s=r(n(14)),u=n(13),c=r(n(27)),l=n(19);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const f=(0,c.default)("evernote");var d={data:()=>({showSpinner:!1,oathURL:"",china:!1,evernoteClient:null,oauthToken:"",oauthTokenSecret:""}),mounted(){this.getOauthURL()},methods:{switchToChina(e){this.china=e,this.showSpinner=!1,this.getOauthURL()},handleAuthorization({target:e}){this.showSpinner=!1;const t=e.getURL();if(0!==t.indexOf("http://localhost/oauth_callback"))return;const n=i.default.parse(t,!0).query.oauth_verifier;n?this.evernoteClient.getAccessToken(this.oauthToken,this.oauthTokenSecret,n,(e,t)=>{this.$safeRun(async()=>{this.evernoteClient=new a.default.Client({token:t,sandbox:!1,china:this.china});const e=this.evernoteClient.getUserStore(),n=await e.getUser();s.default.fetch(u.STORE_COMMIT,{mutations:[{type:"evernote/updateEvernote",payload:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({oauthToken:t,china:this.china},n)}]}).then(()=>{window.close()})})}):window.close()},getOauthURL(){try{this.evernoteClient=new a.default.Client({consumerKey:"xmind",consumerSecret:"ee87a7c738511e29",sandbox:!1,china:this.china}),this.evernoteClient.getRequestToken("http://localhost/oauth_callback",(e,t,n)=>{e?f.error("Request token error: %s",(0,l.normalizeError)(e)):(this.oauthToken=t,this.oauthTokenSecret=n,this.oathURL=this.evernoteClient.getAuthorizeUrl(t))})}catch(e){throw e}}}};t.default=d}},[2106]);