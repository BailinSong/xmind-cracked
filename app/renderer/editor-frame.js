module.exports=webpackJsonp([3],{10:function(e,t){e.exports=require("fs")},15:function(e,t){e.exports=require("querystring")},16:function(e,t){e.exports=require("util")},2090:function(e,t,o){"use strict";var i=o(0),a=i(o(12)),n=i(o(15)),r=o(6),s=i(o(29)),d=o(9),l=i(o(460)),c=i(o(468)),u=i(o(2091)),m=i(o(2092)),p=i(o(2093)),h=i(o(2094));function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach(function(t){(0,a.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}const g=n.default.parse(window.location.search.slice(1)).frameId||"";window.frameId=g,(0,s.default)(f({},h.default,{mixins:[...h.default.mixins||[]]}),{name:"editor-frame",storeModules:{[d.SHARED]:f({},l.default,{remoteNamespace:(0,d.FRAME_SHARED_WITH_ID)(g)})},storePlugins:[(0,c.default)(),(0,u.default)(),(0,m.default)(),(0,p.default)(g),()=>{window.addEventListener("focus",()=>{setTimeout(()=>{const e=r.remote.BrowserWindow.getFocusedWindow(),t=e&&e.getBrowserView();t&&t.webContents.focus()},0)})}]})},2091:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(9),a=o(19);t.default=(()=>e=>{const t=`frame/${window.frameId}`;function o(e){const t=e[i.EDITOR_OWNERSHIP].frameToEditor[window.frameId];return t&&t.length>1}e.watch(()=>{let a=[{id:"frame.addNewTab",label:"New Tab",enabled:!0,provider:t},{id:"frame.previousTab",enabled:!0,provider:t},{id:"frame.nextTab",enabled:!0,provider:t}];const n=e.getters[`${i.SHARED}/isShowTabbar`]?"Hide Tab Bar":"Show Tab Bar",r=!(e.getters[`${i.SHARED}/isShowTabbar`]&&(e.state[i.EDITOR_OWNERSHIP].frameToEditor[window.frameId]||[]).length>1);return a.push({id:"frame.toggleTabbar",label:n,enabled:r,provider:t}),a.push({id:"closeSimpleWindow",label:o(e.state)?"Close Tab":"Close Window",enabled:!0,provider:t}),a.push({id:"closeComplexWindow",label:"Close Window",enabled:o(e.state),provider:t}),a},(0,a.microDebounce)(t=>{e.commit(`${i.SHARED}/updateCommands`,t)}))})},2092:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(13),n=i(o(14)),r=o(9);t.default=(()=>e=>{const t=`frame/${window.frameId}`,o={[t]:{"frame.toggleTabbar":()=>{const t=e.getters[`${r.SHARED}/isShowTabbar`];e.commit(`${r.SHARED}/setIsShowTabbar`,{isShow:!t})},"frame.addNewTab":()=>{n.default.fetch(a.EDITOR_OPEN,{frameId:window.frameId})},"frame.previousTab":function(){const t=e.state[r.SHARED].frameId,o=e.state[r.SHARED].activeEditorId,i=e.state[r.EDITOR_OWNERSHIP].frameToEditor[t];if(!i||i&&i.length<2)return;const s=i.indexOf(o);if(s>-1){let e=s-1;e=e<0?e+i.length:e,n.default.fetch(a.SHOW_EDITOR_IN_FRAME,{editorId:i[e],frameId:t})}},"frame.nextTab":function(){const t=e.state[r.SHARED].frameId,o=e.state[r.SHARED].activeEditorId,i=e.state[r.EDITOR_OWNERSHIP].frameToEditor[t];if(!i||i&&i.length<2)return;const s=i.indexOf(o);if(s>-1){const e=(s+1)%i.length;n.default.fetch(a.SHOW_EDITOR_IN_FRAME,{editorId:i[e],frameId:t})}},closeSimpleWindow:()=>{const t=e.state[r.SHARED].activeEditorId;t&&n.default.fetch(a.EDITOR_CLOSE,{editors:[t]})},closeComplexWindow:()=>e.handleCommand("closeWindow")}};e.doHandleCommand=((t,i)=>{let s=i&&i.provider;if(!s){const o=e.getters[`${r.SHARED}/commandById`](t);s=o&&o.provider}if(!s)return n.default.fetch(a.COMMAND_HANDLE_WITH_COMPUTED_PROVIDER,{commandId:t,handlerArgs:i}),"interruption";if(!(s in o))return n.default.fetch((0,a.COMMAND_HANDLE_WITH_PROVIDER)(s),{commandId:t,handlerArgs:i}),"interruption";const d=o[s][t];if(!d)throw new Error(`Command (${t}) can't be handled by command provider (${s})`);d(i)});const i=n.default.route((0,a.COMMAND_HANDLE_WITH_PROVIDER)(t),({commandId:t,handlerArgs:o})=>e.handleCommand(t,o));e.watch(()=>window.isBeingDestroyed,e=>{e&&i()},{sync:!0})})},2093:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(9),n=i(o(152));t.default=(e=>t=>{const o=new Set,i=t.watch(e=>e.sync.ready,()=>{t.state.sync.ready&&(i(),t.watch(t=>t[a.EDITOR_OWNERSHIP].frameToEditor[e],function(e){let t;const o=t=>e(...t).then(e=>e);return function(...e){return t=t?t.then(()=>o(e)):o(e)}}(async(e=[])=>{const i=Array.from(o.keys()).filter(t=>!e.includes(t));await t.dispatch("sync/unregisterModules",{namespaceArr:i.map(e=>(0,a.EDITOR_SHARED_WITH_ID)(e))}),i.forEach(e=>o.delete(e));const r=e.filter(e=>!o.has(e)),s=r.map(e=>(0,a.EDITOR_SHARED_WITH_ID)(e)).reduce((e,t)=>(e[t]=n.default,e),{});await t.dispatch("sync/registerModules",{modules:s}).then(()=>{r.forEach(e=>o.add(e))})}),{immediate:!0}))})})},2094:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(891),a=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,function(){return i[e]})}(n);var r=o(2105),s=o(1);var d=function(e){o(2095)},l=Object(s.a)(a.a,r.a,r.b,!1,d,"data-v-6a19c324",null);t.default=l.exports},2095:function(e,t,o){var i=o(2096);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,o(20).default)("20dc8ef2",i,!0,{})},2096:function(e,t,o){(e.exports=o(18)()).push([e.i,"\n.uk-title-bar-ellipsis[data-v-6a19c324] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  height: 21px;\n}\n.uk-title-bar-file-title[data-v-6a19c324] {\n  width: auto;\n  display: inline-block;\n}\n.uk-darwin-bigsur .uk-window-title-bar-control-group-right button[data-v-6a19c324] {\n  transform: translate(-2px, 2px);\n}\n",""])},2097:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(892),a=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,function(){return i[e]})}(n);var r=o(2102),s=o(1);var d=function(e){o(2098)},l=Object(s.a)(a.a,r.a,r.b,!1,d,"data-v-4b1ab92f",null);t.default=l.exports},2098:function(e,t,o){var i=o(2099);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,o(20).default)("82ea25b0",i,!0,{})},2099:function(e,t,o){(e.exports=o(18)()).push([e.i,"\n.uk-flex-panel-button[data-v-4b1ab92f] {\n  flex: 1 0 auto;\n}\n@media screen and (max-width: 680px) {\n.uk-tab-capsule-outliner-ellipsis[data-v-4b1ab92f] {\n    max-width: 130px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n}\n",""])},2100:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={toolbarItems:{prefix:[{id:"space-5",classes:["uk-flex-2","uk-margin-remove"]},"indent","outdent"],dynamic:["notes"],postfix:["insert",{id:"space-6",classes:["uk-flex-2","uk-margin-remove"]},"share",{id:"space-7",classes:["uk-flex-1","uk-margin-remove"]}]},getTopbarItem:e=>({indent:{type:"toolbar",text:e.$T("Indent"),tooltip:e.$T("Indent the selected topic to next level."),commandId:"outliner.indent",getIsDisabled:()=>!e.canHandleCommand("outliner.indent"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/indent.svg")},outdent:{type:"toolbar",text:e.$T("Outdent"),tooltip:e.$T("Outdent the selected topic to previous level."),commandId:"outliner.outdent",getIsDisabled:()=>!e.canHandleCommand("outliner.outdent"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/outdent.svg")}})};t.default=i},2101:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={toolbarItems:{prefix:[{id:"space-1",classes:["uk-flex-4","uk-margin-remove"]}],dynamic:["topic","subtopic","relationship","summary","boundary","notes"],postfix:["insert",{id:"space-2",classes:["uk-flex-4","uk-margin-remove"]},"zen",{id:"space-3",classes:["uk-flex-1","uk-margin-remove"]},"share",{id:"space-4",classes:["uk-flex-3","uk-margin-remove"]}]},getTopbarItem:e=>({topic:{type:"toolbar",text:e.$T("Topic"),tooltip:e.$T("Add a topic after the selected topic."),commandId:"editor.addTopic",getIsDisabled:()=>!e.canHandleCommand("editor.addTopic"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/topic.svg")},subtopic:{type:"toolbar",text:e.$T("Subtopic"),tooltip:e.$T("Add a child topic to the selected topic."),commandId:"editor.addSubTopic",getIsDisabled:()=>!e.canHandleCommand("editor.addSubTopic"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/subtopic.svg")},relationship:{type:"toolbar",text:e.$T("Relationship"),tooltip:e.$T("Create relationship between 2 topics."),commandId:"editor.addRelationship",getIsDisabled:()=>!e.canHandleCommand("editor.addRelationship"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/relationship.svg")},boundary:{type:"toolbar",text:e.$T("Boundary"),tooltip:e.$T("Group the selected topics with boundary."),commandId:"editor.addBoundary",getIsDisabled:()=>!e.canHandleCommand("editor.addBoundary"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/boundary.svg")},summary:{type:"toolbar",text:e.$T("Summary"),tooltip:e.$T("Add a summary to the selected topics."),commandId:"editor.addSummary",getIsDisabled:()=>!e.canHandleCommand("editor.addSummary"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/summary.svg")},zen:{type:"toolbar",text:e.$T("ZEN"),tooltip:e.$T("Access into ZEN Mode to focus on your ideas."),commandId:"workbench.toggleZenMode",getIsDisabled:()=>!e.canHandleCommand("workbench.toggleZenMode"),getIcon:()=>e.$toResourceURL("static/assets/images/toolbar/zen.svg")}})};t.default=i},2102:function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-workbench-top-bar uk-flex uk-width-1-1 uk-flex-middle"},[o("ul",{ref:"modeTabButtons",staticClass:"uk-tab uk-tab-capsule uk-flex uk-flex-nowrap uk-padding-remove uk-margin-remove uk-flex-middle uk-flex-no-shrink",class:{"uk-disabled":e.editorSharedState.sheetRendering}},e._l(e.modeTabItems,function(t){return o("li",{key:t.value,class:{"uk-active":e.editorSharedState.sheetRendering?e.editorSharedState.sheetRenderingInMode===t.value:e.mode===t.value}},[o("a",{class:{"uk-tab-capsule-outliner-ellipsis":e.isOutlineMode},attrs:{draggable:"false",href:"#",title:t.tooltip,disabled:t.disabled},on:{click:function(o){return e.changeMode(t.value,t.commandId)}}},[e._v(e._s(t.text))])])}),0),e._v(" "),o("div",{staticClass:"uk-flex",staticStyle:{flex:"8 0 auto"}},e._l(e.computedToolbarItems,function(t){return o("div",{key:t.id,ref:"toolbarItems",refInFor:!0,staticClass:"uk-workbench-top-bar-button uk-text-center uk-flex uk-flex-column uk-flex-middle uk-flex-center",class:t.classes,attrs:{"data-id":t.id}},[t.text?o("button",{staticClass:"uk-button uk-button-floating uk-button-icon uk-border-rounded uk-padding-remove uk-button-floating-disabled-native-hover",class:{"uk-button-floating-hover":e.hoverToolbarItemId===t.id},attrs:{title:e.wrappedTooltipWithKeybinding(t.tooltip,t.commandId),disabled:t.disabled},on:{mousedown:function(o){return e.onButtonClick(o,t)},mouseenter:function(o){return e.setHoverToolbarItemId(t.id)},mousemove:function(o){return e.setHoverToolbarItemId(t.id)},mouseleave:function(t){return e.removeHoverToolbarItemId()}}},[o("img",{attrs:{draggable:"false","uk-svg":"",src:t.icon}})]):e._e(),e._v(" "),e.isTextVisible?o("div",{staticClass:"uk-workbench-top-bar-button-text uk-text-small uk-text-nowrap\t"},[e._v("\n        "+e._s(t.text)+"\n      ")]):e._e()])}),0),e._v(" "),o("div",{ref:"togglesButtons",staticClass:"uk-preserve-interactive uk-flex uk-flex-middle uk-flex-panel-button uk-flex-right"},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider uk-workbench-top-bar-button uk-margin-remove-right",class:{"uk-margin-bottom":e.isTextVisible},attrs:{disabled:!e.canHandleCommand("workbench.toggleImagePanel")&&!e.canHandleCommand("workbench.toggleFormatPanel")}},[e._l(e.panelButtonItems,function(t){return[t.show?o("li",{key:t.text,staticClass:"uk-flex-panel-button"},[o("label",{staticClass:"uk-position-relative uk-overflow-visible",staticStyle:{overflow:"visible"},attrs:{title:t.tooltip}},["isImagePanelToggled"===t.modelName?o("input",{directives:[{name:"model",rawName:"v-model",value:e.isImagePanelToggled,expression:"isImagePanelToggled"}],attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:Array.isArray(e.isImagePanelToggled)?e._i(e.isImagePanelToggled,null)>-1:e.isImagePanelToggled},on:{change:function(t){var o=e.isImagePanelToggled,i=t.target,a=!!i.checked;if(Array.isArray(o)){var n=e._i(o,null);i.checked?n<0&&(e.isImagePanelToggled=o.concat([null])):n>-1&&(e.isImagePanelToggled=o.slice(0,n).concat(o.slice(n+1)))}else e.isImagePanelToggled=a}}}):"isFormatPanelToggled"===t.modelName?o("input",{directives:[{name:"model",rawName:"v-model",value:e.isFormatPanelToggled,expression:"isFormatPanelToggled"}],attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:Array.isArray(e.isFormatPanelToggled)?e._i(e.isFormatPanelToggled,null)>-1:e.isFormatPanelToggled},on:{change:function(t){var o=e.isFormatPanelToggled,i=t.target,a=!!i.checked;if(Array.isArray(o)){var n=e._i(o,null);i.checked?n<0&&(e.isFormatPanelToggled=o.concat([null])):n>-1&&(e.isFormatPanelToggled=o.slice(0,n).concat(o.slice(n+1)))}else e.isFormatPanelToggled=a}}}):e._e(),e._v(" "),o("span",{staticClass:"uk-workbench-top-bar-panel-toggle uk-button uk-button-segment uk-button-icon"},[o("img",{attrs:{draggable:"false","uk-svg":"",src:t.icon}})]),e._v(" "),e.isTextVisible?o("div",{staticClass:"uk-workbench-top-bar-panel-toggle-text uk-invisible uk-padding-remove-vertical",staticStyle:{"max-height":"0"}},[e._v("\n              "+e._s(t.text)+"\n            ")]):e._e(),e._v(" "),e.isTextVisible?o("span",{ref:"imagePanelToggleText",refInFor:!0,staticClass:"uk-workbench-top-bar-panel-toggle-text uk-position-absolute uk-text-nowrap uk-text-small",staticStyle:{top:"100%",left:"50%",transform:"translateX(-50%)"}},[e._v(e._s(t.text))]):e._e()])]):e._e()]})],2)])])},a=[]},2103:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(893),a=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,function(){return i[e]})}(n);var r=o(2104),s=o(1),d=Object(s.a)(a.a,r.a,r.b,!1,null,null,null);t.default=d.exports},2104:function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"rootDom",staticClass:"uk-flex uk-flex-middle uk-child-separator uk-separator-vertical uk-workbench-tab-bar uk-position-relative",on:{dragenter:e.onDragEnter,dragover:e.onDragOver,drop:e.onDrop,dragleave:e.onDragLeave,dragexit:e.onDragExit}},[o("ul",{ref:"tabUL",staticClass:"uk-background-default uk-child-separator uk-separator-vertical uk-tab-contained uk-overflow-auto uk-scrollbar-hidden uk-flex-nowrap uk-flex-between uk-text-center uk-width-expand",attrs:{"uk-tab":""},on:{scroll:e.onTabScroll}},[e._l(e.editorIds,function(t,i){return[o("li",{key:t,ref:"tabItems",refInFor:!0,class:{"uk-active":t===e.activeEditorId},staticStyle:{"flex-grow":"1"},attrs:{"data-index":i,"data-id":t,draggable:"true"},on:{click:function(o){return e.showEditor(t)},contextmenu:function(o){return e.popContextMenu(o,t)},dragstart:function(o){return e.onDragStart(o,t)},dragend:function(o){return e.onDragEnd(o,t)}}},[o("a",{staticClass:"uk-padding-remove uk-margin-remove uk-visible-toggle uk-position-relative",staticStyle:{cursor:"default"},attrs:{draggable:"false"}},[o("span",{staticClass:"uk-padding-medium uk-padding-remove-vertical",attrs:{"data-is-title-container":"",title:e.calcTitle(t)}},[e._v("\n            "+e._s(e.calcTitle(t))+"\n          ")]),e._v(" "),o("div",{staticClass:"uk-margin-remove uk-padding-remove uk-invisible-hover uk-position-absolute",staticStyle:{right:"4px",top:"4px"},attrs:{"uk-icon":"close"},on:{click:function(o){return o.stopPropagation(),e.closeEditor(t)}}})])])]})],2),e._v(" "),e.isOverflow?o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-background-default"},[o("div",{staticClass:"uk-padding-remove uk-margin-remove"},[o("button",{staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-xsmall uk-padding-remove-vertical",class:[{"uk-disabled":e.swapLeftDisable}],attrs:{disabled:e.swapLeftDisable,"uk-icon":"previous"},on:{click:e.swapLeft}})]),e._v(" "),o("div",{staticClass:"uk-padding-remove uk-margin-remove"},[o("button",{staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-xsmall uk-padding-remove-vertical",class:[{"uk-disabled":e.swapRightDisable}],attrs:{disabled:e.swapRightDisable,"uk-icon":"next"},on:{click:e.swapRight}})])]):e._e(),e._v(" "),o("div",{staticClass:"uk-padding-remove uk-margin-remove"},[o("button",{staticClass:"uk-button uk-button-tile uk-button-icon uk-border-none",attrs:{"uk-icon":"add",title:e.wrappedTooltipWithKeybinding(e.$T("Add a new tab."),"frame.addNewTab")},on:{click:function(t){return e.addNewEditorView()}}})])])},a=[]},2105:function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmptyFrame,expression:"!isEmptyFrame"}],staticClass:"uk-window",attrs:{id:"app"}},[o("div",{staticClass:"uk-window-expanded-title-bar"},[o("div",{ref:"titleBar",staticClass:"uk-window-title-bar uk-title-bar-ellipsis"},[o("window-control-button-group",{attrs:{"maximize-button":e.isInMapShotMode?"disabled":""}}),e._v(" "),o("div",{ref:"menuButton",staticClass:"uk-window-title-bar-control-group-left uk-text-top"},[o("ul",{staticClass:"uk-menu-bar uk-menu uk-flex-inline",attrs:{"uk-menu":""}},e._l(e.menus,function(t,i){return o("li",{key:i,staticClass:"uk-parent",on:{click:function(t){return e.clickMenu(t,i)}}},[o("button",{attrs:{id:"view_menu_toggle","aria-expanded":"false"}},[e._v("\n              "+e._s(t)+"\n            ")])])}),0)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],staticClass:"uk-window-title uk-overflow-hidden uk-text-top uk-title-bar-file-title",style:{"max-width":e.titleMaxWidth,width:e.titleWidth}},[o("span",{ref:"titleText",staticClass:"uk-inline uk-text-nowrap uk-overflow-hidden uk-text-top",staticStyle:{"text-overflow":"ellipsis",display:"inline-block"},style:{"max-width":e.titleTextMaxWidth}},[e._v("\n          "+e._s(e.title)+"\n        ")]),e._v(" "),e.isDirty?o("span",{staticClass:"uk-window-title-edited-mark uk-flex-no-shrink uk-margin-xsmall-left uk-text-top"},[e._v("— "+e._s(e.$T("Edited")))]):e._e()]),e._v(" "),o("div",{ref:"titleBarControlGroup",staticClass:"uk-window-title-bar-control-group-right uk-position-relative",staticStyle:{display:"block !important","margin-left":"20px"}},[o("div",{staticClass:"uk-button-group",staticStyle:{display:"inline-flex !important","vertical-align":"top"}},[e.shouldShowPromotionButton?o("button",{staticClass:"uk-button uk-button-default uk-button-small uk-margin-xsmall-right uk-margin-xsmall-top uk-text-bold uk-button-danger",staticStyle:{"line-height":"16px"},attrs:{type:"button",title:e.promotionButtonTitle},on:{click:e.onActivateButtonClicked}},[e._v("\n            "+e._s(e.promotionButtonText)+"\n          ")]):e._e()])])],1),e._v(" "),o("topbar",{staticClass:"uk-window-topbar",attrs:{"text-visibility":e.isIconOnly?"hidden":""}})],1),e._v(" "),o("div",{staticClass:"uk-window-body"},[o("tabbar",{directives:[{name:"show",rawName:"v-show",value:e.isShowTabbar,expression:"isShowTabbar"}]})],1)])},a=[]},23:function(e,t){e.exports=require("events")},25:function(e,t){e.exports=require("os")},26:function(e,t){e.exports=require("crypto")},31:function(e,t){e.exports=require("tty")},32:function(e,t){e.exports=require("net")},4:function(e,t){e.exports=require("path")},6:function(e,t){e.exports=require("electron")},891:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(o(12)),n=i(o(2097)),r=i(o(2103)),s=o(8),d=o(6),l=i(o(261)),c=o(352),u=(i(o(42)),o(28)),m=o(9),p=i(o(41));function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}const b=(0,o(45).createGetTextWidthFunction)(),f='12px / 21px -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif';var g={components:{topbar:n.default,tabbar:r.default},mixins:[p.default],data:()=>({menuItems:[],titleMaxWidth:"100%"}),computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach(function(t){(0,a.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},(0,u.mapState)("account",["user","token"]),{},(0,u.mapGetters)("activation",["trialElapsedDays","subscriptionStatus"]),{},(0,u.mapGetters)("activation",{activationStatus:"status"}),{},(0,u.mapState)(m.SHARED,["isEmptyFrame"]),{},(0,u.mapGetters)(m.SHARED,["isShowTabbar"]),{},(0,u.mapState)(m.SHARED,["activeEditorId"]),{},(0,u.mapGetters)("preferences",["language"]),{editorSharedState(){return this.$store.state[(0,m.EDITOR_SHARED_WITH_ID)(this.activeEditorId)]||{}},title(){const e=this.editorSharedState.title;return null!==e&&void 0!==e?`${e}.xmind`:""},isDirty(){return this.editorSharedState.dirty},menus(){return"darwin"!==process.platform?[this.$T("File"),this.$T("Edit"),this.$T("Insert"),this.$T("Tools"),this.$T("View"),this.$T("Help")]:[]},isIconOnly(){return this.$store.getters["preferences/toolbarStyle"]===s.TOOLBAR_STYLE_ICON_ONLY},shouldShowPromotionButton(){return Boolean(this.promotionButtonText)},promotionButtonText(){return this.activationStatus===s.ACTIVATION_STATUS.VALID?"":this.trialElapsedDays<=1?this.$T("Trial Mode"):this.trialElapsedDays>=2?this.$T("Trial Mode ($1 Days Already)",this.trialElapsedDays):this.$T("Trial Mode")},promotionButtonTitle(){return this.activationStatus===s.ACTIVATION_STATUS.VALID?"":this.$T("You can enjoy most of the features in Trial Mode. But some features are locked, please subscribe full version to unlock them.")},touchBarItems(){const e=e=>{const t=this.$store.getters[`${m.SHARED}/commandById`](e);return t&&t.enabled};return this.editorSharedState.editorMode===s.EDITOR_MODE_OUTLINER?[{type:"buttons",buttons:[{icon:"static/images/touchbar/touchbar-indentTemplate.png",enabled:e("outliner.indent"),click:"command:outliner.indent"},{icon:"static/images/touchbar/touchbar-outdentTemplate.png",enabled:e("outliner.outdent"),click:"command:outliner.outdent"},{icon:"static/images/touchbar/touchbar-notesTemplate.png",enabled:e("editor.showNotesEditor"),click:"command:editor.showNotesEditor"}]}]:[{type:"buttons",buttons:[{icon:"static/images/touchbar/touchbar-topicTemplate.png",enabled:e("editor.addTopic"),click:"command:editor.addTopic"},{icon:"static/images/touchbar/touchbar-subtopicTemplate.png",iconPosition:"overlay",enabled:e("editor.addSubTopic"),click:"command:editor.addSubTopic"},{icon:"static/images/touchbar/touchbar-relationshipTemplate.png",enabled:e("editor.addRelationship"),click:"command:editor.addRelationship"},{icon:"static/images/touchbar/touchbar-summaryTemplate.png",enabled:e("editor.addSummary"),click:"command:editor.addSummary"},{icon:"static/images/touchbar/touchbar-boundaryTemplate.png",enabled:e("editor.addBoundary"),click:"command:editor.addBoundary"},{icon:"static/images/touchbar/touchbar-notesTemplate.png",enabled:e("editor.showNotesEditor"),click:"command:editor.showNotesEditor"}]},{type:"buttons",buttons:[{icon:"static/images/touchbar/touchbar-zenTemplate.png",click:"command:workbench.toggleZenMode"}]}]},isInMapShotMode(){return this.$store.getters[`${m.SHARED}/aggregatedContexts`]["editor.inMapShotMode"]},editedTextWidth(){return b(`— ${this.$T("Edited")}`,f)+4+5},titleTextMaxWidth(){if(!this.editedTextWidth||!this.isDirty)return"100%";return`calc(100% - ${this.editedTextWidth}px)`},titleWidth(){return`${b(this.title,f)+5+(this.isDirty?this.editedTextWidth:0)}px`}}),watch:{language(){this.$nextTick(()=>{this.calcTitleMaxWidth()})}},mounted(){"darwin"!==process.platform&&l.default.on(c.MENU_DID_UPDATE_STATE,()=>{const e=d.remote.Menu.getApplicationMenu();this.menuItems=e&&e.items||[]}),this.checkPromotionButtonNormality(),this.calcTitleMaxWidth()},methods:{onActivateButtonClicked(){this.$store.handleCommand("activate")},clickMenu({target:e},t){const o=this.menuItems[t].submenu;if(!o||!o.items)return;const i=d.remote.Menu.buildFromTemplate(o.items),a=e.getBoundingClientRect();i.popup({x:parseInt(a.left),y:parseInt(a.top+a.height)})},checkPromotionButtonNormality(){if(!this.shouldShowPromotionButton)return;const e=this.$refs.titleBarControlGroup.querySelector("button");if(!e)throw new Error("No subscription prompts");!!e.offsetParent||(e.style.display="block"),(e.clientHeight<10||e.clientWidth<20)&&(e.style.display="block",e.style.height="20px",e.style.width="150px")},calcTitleMaxWidth(){if(!this.$refs.menuButton)return;let e=this.$refs.menuButton.clientWidth;const t="darwin"===process.platform;this.titleMaxWidth=`calc(100vw - ${e+132+30+(t?130:0)}px)`}}};t.default=g},892:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(o(12)),n=i(o(4)),r=o(6),s=o(28),d=o(13),l=o(8),c=i(o(14)),u=o(21),m=o(9),p=i(o(27)),h=o(56),b=i(o(2100)),f=i(o(2101)),g=o(45);function I(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?I(Object(o),!0).forEach(function(t){(0,a.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}const T=(0,p.default)("renderer:editor-frame:topbar"),{Menu:k,MenuItem:w}=r.remote,x='-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif',y="darwin"===process.platform?14:0,O=(0,g.createGetTextWidthFunction)();var E={name:"Topbar",components:{},props:{textVisibility:{type:String}},data:function(){return{hoverToolbarItemId:null,windowWidth:1/0,updatedTopbarItemsCount:0}},computed:v({},(0,s.mapState)("account",["region","user","token"]),{},(0,s.mapGetters)("preferences",["language"]),{},(0,s.mapGetters)("app",["usableShareItems"]),{editorSharedState(){return this.$store.state[(0,m.EDITOR_SHARED_WITH_ID)(this.activeEditorId)]||{}},isRightbarVisible(){return this.editorSharedState.isRightbarVisible},rightBarPanel(){return this.editorSharedState.rightBarPanel},mode(){return this.editorSharedState.editorMode},isOutlineMode(){return this.mode===l.EDITOR_MODE_OUTLINER},toolbarConfig(){return this.isOutlineMode?b.default:f.default},activeEditorId(){return this.$store.state[m.SHARED].activeEditorId},isTextVisible(){return"hidden"!==this.textVisibility},modeTabItems(){return[v({},this.getTopbarItem("mindmap",["disabled","icon"]),{value:l.EDITOR_MODE_SNOWBRUSH}),v({},this.getTopbarItem("outliner",["disabled","icon"]),{value:l.EDITOR_MODE_OUTLINER})]},panelButtonItems(){return[v({},this.getTopbarItem("icon",["disabled","icon"]),{show:this.isImagePanelSegmentButtonVisible,modelName:"isImagePanelToggled"}),v({},this.getTopbarItem("format",["disabled","icon"]),{show:this.isFormatPanelSegmentButtonVisible,modelName:"isFormatPanelToggled"})]},dynamicInsertMenuItem(){return this.toolbarConfig.toolbarItems.dynamic.reduce((e,t)=>{const o=this.getTopbarItem(t);return e[t]={icon:t,label:o.text,commandId:o.commandId,eventAction:`${o.commandId.split(".")[1]}ByToolbar`},e},{})},insertMenuItems(){const e=e=>this.toolbarConfig.toolbarItems.dynamic.includes(e)?this.toolbarItems.includes(e)?null:this.dynamicInsertMenuItem[e]:null,t=[[e("topic"),e("subtopic")],[e("relationship"),e("summary"),e("boundary")],[e("notes"),{icon:"label",label:this.$T("Label"),commandId:"editor.showLabelEditor",eventAction:"addLabelByToolbar"},{icon:"link",label:this.$T("Link(noun)"),submenu:[{label:this.$T("Webpage"),commandId:"editor.showHyperlinkEditor",eventAction:"addWebLinkByToolbar"},{label:this.$T("Topic"),commandId:"editor.showTopiclinkEditor",eventAction:"addTopicLinkByToolbar"},{label:this.$T("Local File"),commandId:"editor.addFileLink",eventAction:"addFileLinkByToolbar"},{label:this.$T("Local Folder"),commandId:"editor.addFolderLink",eventAction:"addFoldLinkByToolbar"}]}],[{icon:"attachment",label:this.$T("Attachment"),commandId:"editor.addAttachmentOnNewTopic",eventAction:"addAttachmentByToolbar"},{icon:"audionote",label:this.$T("Audio Note"),commandId:"editor.addAudioOnNewTopic",eventAction:"addAudioNoteByToolbar"}],[{icon:"localimage",label:this.$T("Local Image"),commandId:"editor.addLocalImage",eventAction:"addImageByToolbar"},{icon:"equation",label:this.$T("Equation"),commandId:"editor.showEquationEditor",eventAction:"addEquationByToolbar"}]];return t.reduce((e,o,i)=>{const a=o.filter(e=>!!e);if(!a.length)return e;const n=e.concat(a);return i!==t.length-1&&n.push("---"),n},[])},exportMenuOptions(){return{exportImage:{label:this.$T("PNG"),commandId:"workbench.exportPng1",disabled:this.isOutlineMode,imgName:"export-image",hasSub:!0},exportSvg:{label:this.$T("SVG"),commandId:"workbench.exportSvg1",disabled:this.isOutlineMode,imgName:"export-svg",hasSub:!0},exportPdf:{label:this.$T("PDF"),commandId:"workbench.exportPdf",disabled:this.isOutlineMode,imgName:"export-pdf"},exportPdfMap:{label:this.$T("PDF"),commandId:"workbench.exportPdfMap",disabled:!this.isOutlineMode,imgName:"export-pdf"},exportMd:{label:this.$T("Markdown"),commandId:"workbench.exportMd",disabled:!1,imgName:"export-markdown"},exportExcel:{label:this.$T("Excel"),commandId:"workbench.exportExcel",disabled:!1,imgName:"export-excel"},exportWord:{label:this.$T("Word"),commandId:"workbench.exportWord",disabled:!1,imgName:"export-word"},exportOPML:{label:this.$T("OPML"),commandId:"workbench.exportOPML",disabled:!1,imgName:"export-opml"},exportTextBundle:{label:this.$T("TextBundle"),commandId:"workbench.exportTextBundle",disabled:!1,imgName:"export-textbundle"}}},shareMenuOptions(){const e={facebook:{commandId:"shareFacebook",label:"Facebook",imgName:"share-facebook"},twitter:{label:"Twitter",imgName:"share-twitter",commandId:"shareTwitter"},pinterest:{label:"Pinterest",imgName:"share-pinterest",commandId:"sharePinterest"},evernote:{label:"Evernote",imgName:"share-evernote",commandId:"shareEvernote"},biggerplate:{label:"Biggerplate",imgName:"share-biggerplate",commandId:"shareBiggerPlate"},"public link":{label:"Public Link",imgName:"share-public-link",commandId:"sharePublic"},"private link":{label:"Private Link",imgName:"share-private-link",commandId:"sharePrivate"},blog:{label:"Blog",imgName:"share-blog",commandId:"shareBlog"},email:{label:"E-mail",imgName:"share-email",commandId:"shareMail"}};return this.usableShareItems.reduce((t,o)=>(t[o]=e[o],t),{})},isImagePanelToggled:{get(){return this.isRightbarVisible&&this.rightBarPanel===l.RIGHT_BAR_PANEL_IMAGE},set(){this.sendCommand("workbench.toggleImagePanel")}},isFormatPanelToggled:{get(){return this.isRightbarVisible&&this.rightBarPanel===l.RIGHT_BAR_PANEL_FORMAT},set(){this.sendCommand("workbench.toggleFormatPanel")}},isImagePanelSegmentButtonVisible:()=>!0,isFormatPanelSegmentButtonVisible(){return!this.isOutlineMode},toolbarItems(){const{windowWidth:e}=this;if(!this.$refs.modeTabButtons||!this.$refs.togglesButtons||!this.updatedTopbarItemsCount)return[];let{prefix:t,dynamic:o,postfix:i}=this.toolbarConfig.toolbarItems;t=[...t],o=[...o],i=[...i];const a={},n=e=>{if(a[e])return a[e];const t=(this.isTextVisible?Math.max(47,this.getTopbarItem(e,["textWidth"]).textWidth):47)+12;return a[e]=t,t},r=t.filter(e=>"string"==typeof e).concat(o.concat(i.filter(e=>"string"==typeof e))).reduce((e,t)=>e+n(t),0);let s=y+this.$refs.modeTabButtons.clientWidth+r+this.$refs.togglesButtons.clientWidth-(e-32);for(;s>0;){const e=o.pop();if(!e)break;s-=n(e)}return t.concat(o).concat(i)},computedToolbarItems(){return this.toolbarItems.map(e=>"string"==typeof e?v({},this.makeToolbarItem(e),{id:e}):e).filter(Boolean)},computedToolbarItemsDisabledList(){return this.computedToolbarItems.reduce((e,t)=>"boolean"!=typeof t.disabled?e:(e[t.id]=t.disabled,e),{})},topbarItems(){return v({},{mindmap:{type:"mode",text:this.$T("Mind Map"),tooltip:this.wrappedTooltipWithKeybinding(this.$T("Switch to Mind Map mode."),"workbench.switchToMapOrOutliner"),commandId:"workbench.mapMode",getIsDisabled:()=>!this.canHandleCommand("workbench.mapMode")&&!this.canHandleCommand("workbench.outlineMode"),getIcon:()=>this.$toResourceURL("static/assets/images/icon-toolbar-map.svg")},outliner:{type:"mode",text:this.$T("Outliner"),tooltip:this.wrappedTooltipWithKeybinding(this.$T("Switch to Outliner mode."),"workbench.switchToMapOrOutliner"),commandId:"workbench.outlineMode",getIsDisabled:()=>!this.canHandleCommand("workbench.mapMode")&&!this.canHandleCommand("workbench.outlineMode"),getIcon:()=>this.$toResourceURL("static/assets/images/icon-toolbar-outliner.svg")},notes:{type:"toolbar",text:this.$T("Note"),tooltip:this.$T("Insert a note to the selected topic."),commandId:"editor.showNotesEditor",getIsDisabled:()=>!this.canHandleCommand("editor.showNotesEditor"),getIcon:()=>this.$toResourceURL("static/assets/images/toolbar/notes.svg")},insert:{type:"toolbar",text:this.$T("Insert"),tooltip:this.$T("Add other elements to selected topics."),onclick:"showInsertMenu",getIsDisabled:()=>!this.canHandleInsertMenu(),getIcon:()=>this.$toResourceURL("static/assets/images/toolbar/insert.svg")},share:{type:"toolbar",text:this.isOutlineMode?this.$T("Export"):this.$T("Share"),tooltip:this.$T("Export or share your map."),onclick:"onShareButtonClick",getIsDisabled:()=>!this.canHandleShareMenu(),getIcon:()=>this.isOutlineMode?this.$toResourceURL("static/assets/images/toolbar/export.svg"):this.$toResourceURL("static/assets/images/toolbar/share.svg")},icon:{type:"panel",text:this.$T("Icon"),tooltip:this.wrappedTooltipWithKeybinding(this.$T("Show or hide marker and sticker options."),"workbench.toggleImagePanel"),commandId:"workbench.toggleImagePanel",getIsDisabled:()=>!this.canHandleCommand("workbench.toggleImagePanel"),getIcon:()=>this.$toResourceURL("static/assets/images/toolbar/marker.svg")},format:{type:"panel",text:this.$T("Format"),tooltip:this.wrappedTooltipWithKeybinding(this.$T("Show or hide style and format options."),"workbench.toggleFormatPanel"),commandId:"workbench.toggleFormatPanel",getIsDisabled:()=>!this.canHandleCommand("workbench.toggleFormatPanel"),getIcon:()=>this.$toResourceURL("static/assets/images/toolbar/format.svg")}},{},f.default.getTopbarItem(this),{},b.default.getTopbarItem(this))}}),mounted(){this.updateTopbarItemsCount(),this.updateClientWidth(),window.addEventListener("resize",this.updateClientWidth)},beforeDestroy(){window.removeEventListener("resize",this.updateClientWidth)},watch:{computedToolbarItemsDisabledList(e,t){const{hoverToolbarItemId:o}=this;o&&"boolean"==typeof e[o]&&e[o]!==t[o]&&!e[o]&&this.$nextTick(()=>{this.removeHoverToolbarItemId()})},language(){this.updateTopbarItemsCount()},isOutlineMode(){this.updateTopbarItemsCount()}},methods:{updateTopbarItemsCount(){this.$nextTick(()=>{this.updatedTopbarItemsCount+=1})},updateClientWidth(){this.windowWidth=document.documentElement.clientWidth},caculateShareMenuIconUrl:e=>n.default.join((0,h.getAppPath)(),`static/images/toolbar-share/${e}.png`),caculateInsertMenuIconUrl(e){const t="darwin"===process.platform?"Template":"";return n.default.join((0,h.getAppPath)(),`static/images/toolbar-insert/${e}${t}.png`)},sendCommand(e){this.frameFocus(),this.$store.handleCommand(e)},getAllInsertMenuCommandIds(e){return e.filter(e=>"---"!==e&&!!e).reduce((e,t)=>(t.commandId&&e.push(t.commandId),t.submenu&&(e=e.concat(this.getAllInsertMenuCommandIds(t.submenu))),e),[])},canHandleInsertMenu(){return this.getAllInsertMenuCommandIds(this.insertMenuItems).some(e=>this.canHandleCommand(e))},createInsertMenuItemOptions(e){const t={label:e.label,enabled:!e.commandId||this.canHandleCommand(e.commandId),click:e.commandId?()=>{this.$store.handleCommand(e.commandId),(0,u.trackEvent)({eventCategory:"Toolbar",eventAction:e.eventAction,eventName:e.commandId})}:null};return e.icon&&(t.icon=this.caculateInsertMenuIconUrl(e.icon)),t},showInsertMenu(){let e=new k;this.insertMenuItems.forEach(t=>{if("---"===t)return e.append(new w({type:"separator"}));const o=this.createInsertMenuItemOptions(t);t.submenu&&(o.submenu=t.submenu.filter(e=>!!e).map(e=>this.createInsertMenuItemOptions(e))),e.append(new w(o))});let t=this.$refs.toolbarItems.find(e=>"insert"===e.dataset.id).getBoundingClientRect();e.addListener("menu-will-close",()=>{this.removeHoverToolbarItemId()}),e.popup({window:r.remote.getCurrentWindow(),x:parseInt(t.x),y:parseInt(t.bottom)+6})},canHandleCommand(e){if(this.editorSharedState.sheetRendering)return!1;const t=this.$store.getters[`${m.SHARED}/commandById`](e);return!!t&&t.enabled},getTopbarItem(e,t=[]){const o=this.topbarItems,i={mode:`500 14px ${x}`,toobar:`400 11px ${x}`,panel:`400 11px ${x}`},a=o[e],n={text:a.text,tooltip:a.tooltip,commandId:a.commandId,onclick:a.onclick};return Array.isArray(n)?n:(t.includes("disabled")&&(n.disabled=a.getIsDisabled()),t.includes("icon")&&(n.icon=a.getIcon()),t.includes("textWidth")&&(n.textWidth=O(a.text,i[a.type])),t.includes("id")&&(n.id=e),n)},makeToolbarItem(e){return this.getTopbarItem(e,["disabled","icon"])||null},onButtonClick(e,t){"string"==typeof t.onclick?this[t.onclick](e):t.commandId&&(this.sendCommand(t.commandId),this.trackCommandId(t.commandId))},canHandleShareMenu(){const e=[];for(const t in this.exportMenuOptions){const o=this.exportMenuOptions[t];e.push(o.commandId)}for(const t in this.shareMenuOptions){const o=this.shareMenuOptions[t];e.push(o.commandId)}return e.some(e=>this.canHandleCommand(e))},frameFocus(){const e=r.remote.BrowserWindow.getFocusedWindow(),t=e&&e.getBrowserView();t&&t.webContents.send("frame-focus")},onShareButtonClick(){this.frameFocus();const e=this.exportMenuOptions,t=this.shareMenuOptions;let o=Object.keys(t).map(e=>({label:t[e].label,click:()=>{this.clickShare(t[e])},icon:this.caculateShareMenuIconUrl(t[e].imgName)})),i=Object.keys(e).filter(t=>!e[t].disabled).map(t=>{let o="";return{label:e[t].label+o,click:()=>{this.sendCommand(e[t].commandId)},icon:this.caculateShareMenuIconUrl(e[t].imgName)}});o="true"===process.env.VANA_LICENSE_MODE?i.concat([{type:"separator"},{label:t.email.label,click:()=>{this.clickShare(t.email)},icon:this.caculateShareMenuIconUrl(t.email.imgName)}]):this.isOutlineMode?i:o.concat([{type:"separator"},{label:this.$T("Customize"),click:()=>{this.$safeRun(async()=>{await c.default.fetch(d.WINDOW_OPEN,{name:"preferences"})})}},{label:this.$T("Export"),submenu:i}]);const a=r.remote.Menu.buildFromTemplate(o);a.addListener("menu-will-close",()=>{this.removeHoverToolbarItemId()});let n=this.$refs.toolbarItems.find(e=>"share"===e.dataset.id).getBoundingClientRect();a.popup({window:r.remote.getCurrentWindow(),x:parseInt(n.x)-55,y:parseInt(n.bottom)+6})},clickRoot(e){e.stopPropagation()},upperCaseDomain(){return"cn"===this.region?"CN":"us"===this.region?"NET":"zh-CN"===this.language?"CN":"NET"},async clickShare(e){this.sendCommand(e.commandId),(0,u.trackEvent)({eventCategory:"Toolbar",eventAction:"clickShareButton"+this.upperCaseDomain(),eventName:e.commandId})},changeMode(e,t){this.sendCommand(t),(0,u.trackEvent)({eventCategory:"Toolbar",eventAction:"changeModeByToolbar",eventName:e})},trackCommandId(e){const t=e.split("."),o=2===t.length?t[1]:e;o?(0,u.trackEvent)({eventCategory:"Toolbar",eventAction:o+"ByToolbar"}):T.warn("Get eventAction Error!:",e)},setHoverToolbarItemId(e){this.hoverToolbarItemId=e},removeHoverToolbarItemId(){this.hoverToolbarItemId=null},wrappedTooltipWithKeybinding:g.wrappedTooltipWithKeybinding}};t.default=E},893:function(e,t,o){"use strict";var i=o(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(o(12)),n=i(o(15)),r=o(9),s=i(o(14)),d=o(13),l=o(28),c=o(6),u=o(45);function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}const p=n.default.parse(window.location.search.slice(1)).frameId||"";var h={data:()=>({editorIdsForDragging:null,isDropArea:!1,draggingId:null,isOverflow:!1,swapLeftDisable:!0,swapRightDisable:!1}),computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach(function(t){(0,a.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},(0,l.mapState)({activeEditorId:e=>e[r.SHARED].activeEditorId}),{editorIdFromStore(){return this.$store.state[r.EDITOR_OWNERSHIP].frameToEditor[p]},editorIds(){return this.isDropArea&&this.editorIdsForDragging||this.editorIdFromStore}}),watch:{activeEditorId(e){this.$nextTick(()=>{this.showItemInScrollView(e)})}},mounted:function(){window.addEventListener("resize",this.calcIsOverflow),this.$nextTick(function(){this.calcIsOverflow()})},updated:function(){this.$nextTick(function(){this.calcIsOverflow()})},beforeDestroy:function(){window.removeEventListener("resize",this.calcIsOverflow)},methods:{calcTitle(e){const t=this.$store.state[(0,r.EDITOR_SHARED_WITH_ID)(e)];return t&&null!==t.title?t.title:this.$T("Untitled")},showEditor:e=>s.default.fetch(d.SHOW_EDITOR_IN_FRAME,{editorId:e,frameId:p}),closeEditor:e=>s.default.fetch(d.EDITOR_CLOSE,{editors:[e]}),addNewEditorView:()=>s.default.fetch(d.EDITOR_OPEN,{frameId:p}),popContextMenu(e,t){const{Menu:o}=c.remote;o.buildFromTemplate([{label:this.$T("Close Tab"),click:()=>{s.default.fetch(d.EDITOR_CLOSE,{editors:[t]})}},{label:this.$T("Close Other Tab"),click:async()=>{const e=this.$store.state[r.EDITOR_OWNERSHIP].frameToEditor[p].filter(e=>e!==t);for(const t of e)await s.default.fetch(d.EDITOR_CLOSE,{editors:[t]})}},{label:this.$T("Move Tab to New Window"),click(){s.default.fetch(d.SHOW_EDITOR_IN_FRAME,{editorId:t})}}]).popup({window:c.remote.getCurrentWindow(),x:e.clientX,y:e.clientY})},onDragStart(e,t){e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/x-editor-info",JSON.stringify({frameId:p,editorId:t})),this.draggingId=t},onDragEnd(){this.draggingId=null},onDragEnter(e){-1!==e.dataTransfer.types.indexOf("text/x-editor-info")&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},onDragOver(e){if(-1===e.dataTransfer.types.indexOf("text/x-editor-info"))return;e.preventDefault(),e.dataTransfer.dropEffect="move",this.isDropArea=!0;const t=this.$refs.tabItems.slice().sort((e,t)=>e.dataset.index-t.dataset.index);let o;for(o=0;o<t.length;o++){let i=-1/0;if(t[o-1]){const e=t[o-1].getBoundingClientRect();i=(e.right+e.left)/2}let a=1/0;if(t[o]){const e=t[o].getBoundingClientRect();a=(e.right+e.left)/2}if(e.clientX>i&&e.clientX<a)break}const i=this.editorIdFromStore.filter(e=>e!==this.draggingId);i.splice(o,0,this.draggingId),this.editorIdsForDragging=i},onDrop(e){let t=e.dataTransfer.getData("text/x-editor-info");try{t=JSON.parse(t)}catch(e){t=null}if(t&&(e.preventDefault(),this.isDropArea=!1,this.draggingId)){const e=this.editorIdsForDragging.slice();s.default.fetch(d.UPDATE_EDITOR_INDEX,{frameId:p,newEditorIds:e})}},onDragLeave(e){if(-1!==e.dataTransfer.types.indexOf("text/x-editor-info")){const e=document.elementFromPoint(event.clientX,event.clientY);this.$el.contains(e)||(this.isDropArea=!1)}},onDragExit(){},calcIsOverflow(){if(!this.$el)return!1;const e=this.$refs.tabUL;return!!e&&(this.isOverflow=e.scrollWidth>e.offsetWidth,this.isOverflow)},onTabScroll(){this.$nextTick(()=>{const e=this.$refs.tabUL;e&&(this.swapLeftDisable=0===e.scrollLeft,this.swapRightDisable=e.scrollLeft+e.offsetWidth>=e.scrollWidth)})},showItemInScrollView(e){if(!e)return;const t=this.$refs.tabItems,o=this.$refs.tabUL,i=t.find(t=>t.dataset.id===e);i.offsetLeft<o.scrollLeft?o.scrollLeft=i.offsetLeft:i.offsetLeft+i.offsetWidth>o.scrollLeft+o.offsetWidth&&(o.scrollLeft=i.offsetLeft+i.offsetWidth-o.offsetWidth)},swapLeft(){const e=this.$refs.tabItems.slice().sort((e,t)=>t.dataset.index-e.dataset.index);for(const t of e)if(t.offsetLeft<this.$refs.tabUL.scrollLeft)return void this.showItemInScrollView(t.dataset.id)},swapRight(){const e=this.$refs.tabItems.slice().sort((e,t)=>e.dataset.index-t.dataset.index),t=this.$refs.tabUL.scrollLeft+this.$refs.tabUL.offsetWidth;for(const o of e)if(o.offsetLeft+o.offsetWidth>t)return void this.showItemInScrollView(o.dataset.id)},wrappedTooltipWithKeybinding:u.wrappedTooltipWithKeybinding}};t.default=h}},[2090]);