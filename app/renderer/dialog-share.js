module.exports=webpackJsonp([22],{10:function(e,t){e.exports=require("fs")},1144:function(e,t,a){"use strict";var i=a(0),l=i(a(29)),s=i(a(1145));(0,l.default)(s.default,{name:"dialog-share"})},1145:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(415),l=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);var n=a(1146),o=a(1),r=Object(o.a)(l.a,n.a,n.b,!1,null,null,null);t.default=r.exports},1146:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uk-window uk-window-dialog"},[a("div",{staticClass:"uk-window-title-bar uk-window-title-bar-floating"},[a("window-control-button-group")],1),e._v(" "),a("div",{staticClass:"uk-window-body uk-padding-large"},[a("h1",{staticClass:"uk-margin-small-bottom"},[e._v(e._s(e.heading))]),e._v(" "),a("div",{staticClass:"uk-margin-medium-bottom"},[e._v(e._s(e.tip))]),e._v(" "),a("figure",{staticClass:"uk-flex uk-flex-between uk-margin-remove-bottom"},[a("div",{staticClass:"uk-width-1-2 uk-flex-none uk-card uk-card-default uk-card-body uk-flex uk-flex-center uk-flex-middle uk-flex-column uk-card-small-shadow uk-border-rounded",staticStyle:{"min-height":"205px"},style:e.preview&&{"background-color":e.backgroundColor}},[e.preview?a("img",{staticClass:"uk-width-1-1 uk-height-1-1",attrs:{draggable:"false",alt:"",src:e.preview}}):a("div",{attrs:{"uk-spinner":"ratio: 2.2"}})]),e._v(" "),a("figcaption",{staticClass:"uk-flex-auto uk-margin-left uk-flex-column uk-flex-between uk-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mapNameModel,expression:"mapNameModel"}],staticClass:"uk-input uk-margin-small-bottom",attrs:{placeholder:e.$T("Title"),autofocus:""},domProps:{value:e.mapNameModel},on:{input:function(t){t.target.composing||(e.mapNameModel=t.target.value)}}}),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.descriptionModel,expression:"descriptionModel"}],staticClass:"uk-textarea uk-margin-small-bottom uk-height-expand",attrs:{placeholder:e.$T("Description")},domProps:{value:e.descriptionModel},on:{input:function(t){t.target.composing||(e.descriptionModel=t.target.value)}}}),e._v(" "),a("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle"},[a("label",{staticClass:"uk-flex-none uk-margin-small-right"},[e._v(e._s(e.$T("Language")))]),e._v(" "),a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-1-1"},[e._v("\n            "+e._s((e.languages[e.languageIndexModel]||{}).value)+"\n          ")]),e._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},e._l(e.languages,function(t,i){return a("li",{key:i},[a("button",{class:{"uk-checked":e.languageIndexModel===i},on:{click:function(t){e.languageIndexModel=i}}},[e._v("\n                  "+e._s(t.value)+"\n                ")])])}),0)])]),e._v(" "),"public link"===e.shareType?a("div",{staticClass:"uk-margin-small-top"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.shareAsTemplate,expression:"shareAsTemplate"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",name:"shareAsTemplate"},domProps:{checked:Array.isArray(e.shareAsTemplate)?e._i(e.shareAsTemplate,null)>-1:e.shareAsTemplate},on:{change:function(t){var a=e.shareAsTemplate,i=t.target,l=!!i.checked;if(Array.isArray(a)){var s=e._i(a,null);i.checked?s<0&&(e.shareAsTemplate=a.concat([null])):s>-1&&(e.shareAsTemplate=a.slice(0,s).concat(a.slice(s+1)))}else e.shareAsTemplate=l}}}),e._v("\n            "+e._s(e.$T("Share As a Template"))+"\n          ")]),e._v(" "),a("span",{staticClass:"uk-icon",attrs:{id:"popover-template","uk-icon":"icon: question"}}),e._v(" "),a("div",{staticStyle:{width:"250px"},attrs:{"uk-pop-tips":"","data-pos":"top-center","data-align-size":"false"}},[a("div",{staticClass:"uk-background-default uk-padding uk-text-left",staticStyle:{"line-height":"14px"}},[e._v("\n              "+e._s(e.$T('The file will be marked as "Template" and may be recommended for other users after the upload.'))+"\n            ")])])]):e._e()])])]),e._v(" "),a("div",{staticClass:"uk-window-button-bar"},[a("div",{staticClass:"uk-button-group"},[a("button",{staticClass:"uk-button uk-button-primary",attrs:{disabled:e.uploading},on:{click:e.upload}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"uk-text-middle",attrs:{"uk-spinner":"ratio: 0.6"}}),e._v(" "),a("span",{staticClass:"uk-text-middle"},[e._v("\n          "+e._s(e.$T("Upload"))+"\n        ")])]),e._v(" "),a("button",{staticClass:"uk-button uk-button-default",on:{click:e.close}},[e._v("\n        "+e._s(e.$T("Close"))+"\n      ")])]),e._v(" "),a("div",{staticClass:"uk-text-danger"},[e._v("\n      "+e._s(e.errorText)+"\n    ")])])])},l=[]},15:function(e,t){e.exports=require("querystring")},16:function(e,t){e.exports=require("util")},23:function(e,t){e.exports=require("events")},25:function(e,t){e.exports=require("os")},26:function(e,t){e.exports=require("crypto")},31:function(e,t){e.exports=require("tty")},32:function(e,t){e.exports=require("net")},4:function(e,t){e.exports=require("path")},415:function(e,t,a){"use strict";var i=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(a(15)),s=i(a(14)),n=a(8),o=a(13),r=i(a(41));const u=l.default.parse(location.search.substr(1));var d={mixins:[r.default],data:()=>({preview:"",errorText:"",mapNameModel:u.mapName,descriptionModel:"",backgroundColor:u.backgroundColor,languageIndexModel:0,uploading:!1,shareType:u.type,shareAsTemplate:!1}),computed:{languages(){return[{key:"all",value:this.$T("All")},{key:"en",value:"English"},{key:"zh",value:" 中文"},{key:"es",value:"Español"},{key:"de",value:"Deutsch"},{key:"fr",value:"Français"},{key:"ja",value:"日本語"}]},touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Upload"),backgroundColor:"primary",click:"upload"},{type:"space",size:"flexible"}].filter(Boolean)},heading(){return{blog:this.$T("Share to Blog"),facebook:this.$T("Share to Facebook"),twitter:this.$T("Share to Twitter"),pinterest:this.$T("Share to Pinterest"),linkedin:this.$T("Share to LinkedIn"),biggerplate:this.$T("Share Map on Biggerplate.com"),"public link":this.$T("Public Link"),"private link":this.$T("Private Link")}[u.type]},tip(){return{biggerplate:this.$T("Publish your map on the largest mind map community."),blog:this.$T("This map will be posted on Blog via XMind online library."),facebook:this.$T("This map will be posted on Facebook via XMind online library."),twitter:this.$T("This map will be posted on Twitter via XMind online library."),pinterest:this.$T("This map will be posted on Pinterest via XMind online library."),linkedin:this.$T("This map will be posted on LinkedIn via XMind online library."),"public link":this.$T("You will upload the map to XMind online library and generate a public link."),"private link":this.$T("You will upload the map to XMind online library and generate a private link.")}[u.type]}},mounted(){s.default.fetch((0,o.EDITOR_GET_SHEET_PREVIEW_IMAGE_DATA)(u.editorId),{sheetId:u.sheetId,exportImageOptions:{width:297,height:210}}).then(({data:e})=>{this.preview=`data:image/svg+xml;utf8,${encodeURIComponent(e)}`})},methods:{close(){window.close()},async upload(){this.errorText="",this.uploading=!0;const e={title:this.mapNameModel,description:this.descriptionModel,lang:this.languages[this.languageIndexModel].key,preview:this.preview};this.shareAsTemplate&&(e.asTemplate=!0);const t=await s.default.fetch((0,o.EDITOR_SHARE_TO_LIBRARY)(u.editorId),e);this.uploading=!1,t&&t.code?t.code===n.E_UNAUTHORIZED?(await s.default.fetch(o.STORE_COMMIT,{mutations:[{type:"account/clearAccount"}]}),await s.default.fetch(o.WINDOW_OPEN,{name:"dialog-signin"})):this.errorText=this.$T("File upload failed, please check your network and try again later."):setTimeout(()=>{window.close()},0)}}};t.default=d},6:function(e,t){e.exports=require("electron")}},[1144]);